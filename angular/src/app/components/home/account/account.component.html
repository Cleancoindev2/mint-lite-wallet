<div class="progress-linear progress-linear--tiny" *ngIf="!isDataLoaded || loading">
    <div class="container"></div>
</div>

<div class="d-flex justify-content-between">
    <div class="open-tab-btn" tooltip="Open web wallet" placement="right">
        <a [href]="webWalletLink + currentWallet?.publicKey" target="_blank">
            <svg width="20" height="20">
                <use xlink:href="#out"></use>
            </svg>
        </a>
    </div>

    <div>
        <div class="account-name" >
            <div *ngIf="!isEditing">
                {{ currentWallet?.name }}
                <div class="edit-account-btn" (click)="!loading && editAccountName()">
                    <svg width="15" height="15">
                        <use xlink:href="#edit"></use>
                    </svg>
                </div>
            </div>
            <div *ngIf="isEditing" class="position-relative">
                <input type="text" class="edit-account-input" [(ngModel)]="accountName">
                <div class="edit-account-save" (click)="saveAccountName()">
                    <svg class="icon-green" width="20" height="20">
                        <use xlink:href="#check"></use>
                    </svg>
                </div>
            </div>
        </div>
        <div class="account-public-key pointer" tooltip="Copy to clipboard" placement="bottom" (click)="copyText(currentWallet?.publicKey)">
            {{ currentWallet?.publicKey | reduction }}
        </div>
    </div>

    <div class="open-tab-btn" tooltip="Open in tab" placement="left" (click)="openInTab()">
        <svg width="20" height="20">
            <use xlink:href="#tabs"></use>
        </svg>
    </div>
</div>

<div class="mt-3">
    <div class="d-flex justify-content-between align-items-center mb-2">
        <div>MNT: {{ balance.mnt | substr: balance.mnt >= 1 ? 3 : 8 }}</div>
        <button type="button" class="btn btn-sm btn-primary" routerLink="/home/send-tokens/mnt" [disabled]="loading">Send</button>
    </div>
    <div class="d-flex justify-content-between align-items-center">
        <div>GOLD: {{ balance.gold | substr: balance.gold >= 1 ? 3 : 8 }}</div>
        <button type="button" class="btn btn-sm btn-primary" routerLink="/home/send-tokens/gold" [disabled]="loading">Send</button>
    </div>
</div>

<div class="mt-4 bd-top">
    <div class="my-2">Latest transactions</div>
    <div *ngIf="transactionList.length && isDataLoaded; else noTx">
        <div *ngFor="let t of transactionList" class="trs-item">
            <a [href]="detailsLink + t.uniqueId" target="_blank">
                <!--<span class="trs-item-date">{{ t.timeStamp | date: 'MMM d, y, HH:mm:ss' }}</span>-->
                <svg width="15" height="15" class="icon-gold mr-2">
                    <use xlink:href="#export" *ngIf="t.sourceWallet === currentWallet.publicKey; else incoming"></use>
                    <ng-template #incoming>
                        <use xlink:href="#import"></use>
                    </ng-template>
                </svg>

                {{ t.tokensCount | substr: t.tokensCount >= 1 ? 3 : 8 }} <span *ngIf="t.tokenType === 'utility'; else commodity"> MNT</span>
                <ng-template #commodity> GOLD</ng-template>
            </a>
        </div>
    </div>

    <ng-template #noTx>
        <div class="no-tx">No transactions</div>
    </ng-template>
</div>